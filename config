include /etc/sway/config.d/*

# Variables

## Keys — Mods
set $m Mod4
set $sft Shift

floating_modifier $m

## Keys — Directional
set $left h
set $down j
set $up k
set $right l

set $left2 Left
set $down2 Down
set $up2 Up
set $right2 Right

## Keys — Workspaces
set $1 1
set $2 2
set $3 3
set $4 4
set $5 5
set $6 6
set $7 7
set $8 8
set $9 9
set $10 0

set $11 F1
set $12 F2
set $13 F3
set $14 F4
set $15 F5
set $16 F6
set $17 F7
set $18 F8
set $19 F9
set $20 F10
set $21 F11
set $22 F12


## Workspace names
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9
set $ws10 10

set $ws11 11
set $ws12 12
set $ws13 13
set $ws14 14
set $ws15 15
set $ws16 16
set $ws17 17
set $ws18 18
set $ws19 19
set $ws20 20
set $ws21 21
set $ws22 22


## Displays
set $disp0 DP-3
set $disp1 HDMI-A-1
set $disp2 eDP-1


## Misc

### Refresh command
set $refresh_i3status killall -SIGUSR1 i3status

### Colors
set $prime #403070
set $accnt #723ee4



# Settings

## Aesthetics — Colors
#						border	bg		text	indic   child
# client.focused		#4c7899 #285577 #ffffff #2e9ef4 #285577
client.focused 			$prime	$prime	#eeeeee $accnt	$prime
# client.unfocused		$prime	$prime	#eeeeee $accnt	$prime
# client.focused_inactive	$prime	$prime	#eeeeee $accnt	$prime

## Aesthetics — Borders
default_border pixel 1
default_floating_border pixel 1
hide_edge_borders smart
titlebar_border_thickness 0

## Aesthetics — Misc
default_dim_inactive 0.2
seat seat0 xcursor_theme Vimix-cursors 24
font pango:monospace 8


## Outputs
output * {
	bg /home/main/image/art/scene/fireeye-tower.jpg fill
}
output $disp0 {
	resolution 2560x1440
	position 0,0
	# bg /home/main/image/bg/warfarin-r.png fill
}
output $disp1 {
	resolution 1366x768
	position 2560,0
	scale 0.8
	# bg /home/main/image/bg/warfarin-l.png fill
}
output $disp2 {
	scale 1
}


## Status Line
bar {
	status_command i3status
	mode dock
	# mode hide
}


## Inputs
input "type:keyboard" {
	xkb_options compose:menu,caps:escape
	repeat_delay 300
	repeat_rate 30
}
input "type:touchpad" {
	natural_scroll disabled
	tap enabled
	accel_profile "flat"
	pointer_accel 0.8
}


## Workspace Bindings
workspace $ws1 output $disp0
workspace $ws2 output $disp0
workspace $ws3 output $disp0
workspace $ws4 output $disp0
workspace $ws5 output $disp0
workspace $ws6 output $disp1
workspace $ws7 output $disp1
workspace $ws8 output $disp1
workspace $ws9 output $disp1
workspace $ws10 output $disp1
workspace $ws11 output $disp0
workspace $ws12 output $disp0
workspace $ws13 output $disp0
workspace $ws14 output $disp0


## Container Rules
assign [class="^steam$"] "13"
assign [class="^steam_app.*$"] "14"


## Misc
default_orientation horizontal
focus_wrapping no



# Keybindings

## Sway
bindsym $m+$sft+v reload
bindsym $m+$sft+b exec swaymsg exit
bindsym $m+$sft+minus exec systemctl poweroff


## Windows — Navigation
bindsym $m+$left focus left
bindsym $m+$down focus down
bindsym $m+$up focus up
bindsym $m+$right focus right

bindsym $m+$left2 focus left
bindsym $m+$down2 focus down
bindsym $m+$up2 focus up
bindsym $m+$right2 focus right

## Windows — Movement
bindsym $m+$sft+$left move left
bindsym $m+$sft+$down move down
bindsym $m+$sft+$up move up
bindsym $m+$sft+$right move right

bindsym $m+$sft+$left2 move left
bindsym $m+$sft+$down2 move down
bindsym $m+$sft+$up2 move up
bindsym $m+$sft+$right2 move right

bindsym $m+$sft+i kill


## Workspaces — Navigation
bindsym $m+$1 workspace number $ws1
bindsym $m+$2 workspace number $ws2
bindsym $m+$3 workspace number $ws3
bindsym $m+$4 workspace number $ws4
bindsym $m+$5 workspace number $ws5
bindsym $m+$6 workspace number $ws6
bindsym $m+$7 workspace number $ws7
bindsym $m+$8 workspace number $ws8
bindsym $m+$9 workspace number $ws9
bindsym $m+$10 workspace number $ws10

bindsym $m+$11 workspace number $ws11
bindsym $m+$12 workspace number $ws12
bindsym $m+$13 workspace number $ws13
bindsym $m+$14 workspace number $ws14
bindsym $m+$15 workspace number $ws15
bindsym $m+$16 workspace number $ws16
bindsym $m+$17 workspace number $ws17
bindsym $m+$18 workspace number $ws18
bindsym $m+$19 workspace number $ws19
bindsym $m+$20 workspace number $ws20
bindsym $m+$21 workspace number $ws21
bindsym $m+$22 workspace number $ws22


## Workspaces — Movement
bindsym $m+$sft+$1 move container to workspace number $ws1
bindsym $m+$sft+$2 move container to workspace number $ws2
bindsym $m+$sft+$3 move container to workspace number $ws3
bindsym $m+$sft+$4 move container to workspace number $ws4
bindsym $m+$sft+$5 move container to workspace number $ws5
bindsym $m+$sft+$6 move container to workspace number $ws6
bindsym $m+$sft+$7 move container to workspace number $ws7
bindsym $m+$sft+$8 move container to workspace number $ws8
bindsym $m+$sft+$9 move container to workspace number $ws9
bindsym $m+$sft+$10 move container to workspace number $ws10

bindsym $m+$sft+$11 move container to workspace number $ws11
bindsym $m+$sft+$12 move container to workspace number $ws12
bindsym $m+$sft+$13 move container to workspace number $ws13
bindsym $m+$sft+$14 move container to workspace number $ws14
bindsym $m+$sft+$15 move container to workspace number $ws15
bindsym $m+$sft+$16 move container to workspace number $ws16
bindsym $m+$sft+$17 move container to workspace number $ws17
bindsym $m+$sft+$18 move container to workspace number $ws18
bindsym $m+$sft+$19 move container to workspace number $ws19
bindsym $m+$sft+$20 move container to workspace number $ws20
bindsym $m+$sft+$21 move container to workspace number $ws21
bindsym $m+$sft+$22 move container to workspace number $ws22

bindsym $m+$sft+z move scratchpad


## Layout — Navigation
bindsym $m+t focus parent
bindsym $m+n focus child

bindsym $m+space focus mode_toggle

## Layout — Movement
bindsym $m+q split h
bindsym $m+semicolon split v

bindsym $m+u fullscreen toggle
bindsym $m+$sft+space floating toggle
bindsym $m+$sft+q layout toggle split
bindsym $m+$sft+semicolon layout stacking

bindsym $m+w mode "resize"
mode "resize" {
	bindsym $left resize shrink width 10 px or 10 ppt
	bindsym $down resize grow height 10 px or 10 ppt
	bindsym $up resize shrink height 10 px or 10 ppt
	bindsym $right resize grow width 10 px or 10 ppt

	bindsym $left2 resize shrink width 10 px or 10 ppt
	bindsym $down2 resize grow height 10 px or 10 ppt
	bindsym $up2 resize shrink height 10 px or 10 ppt
	bindsym $right2 resize grow width 10 px or 10 ppt

	bindsym Return mode "default"
	bindsym Escape mode "default"
	bindsym $m+w mode "default"
}


## Apps — Launcher
bindsym $m+e exec tofi-drun | xargs swaymsg exec --

bindsym $m+$sft+a exec discord
bindsym $m+$sft+e exec foot
bindsym $m+o exec qutebrowser
bindsym $m+$sft+o exec firefox
bindsym $m+$sft+u exec signal-desktop
bindsym $m+v exec ~/.local/bin/sway-scratch/sway-scratch  cmus cmus foot -a cmus --working-directory=audio/lib -e cmus
bindsym $m+z exec ~/.local/bin/sway-scratch/sway-scratch  -W 50 -H 60 kpxc "org.keepassxc.KeePassXC" keepassxc
bindsym $m+$sft+m exec foot -e pacmixer


## Screenshots — Clipboard
bindsym Print exec grim - | wl-copy
bindsym $m+Print exec swaymsg -t get_tree | jq -r '.. | (.nodes? // empty)[] | if (.focused) then select(.focused) | "\(.rect.x),\(.rect.y) \(.rect.width)x\(.rect.height)" else (.floating_nodes? // empty)[] | select(.visible) | select(.focused) | "\(.rect.x),\(.rect.y) \(.rect.width)x\(.rect.height)" end' | grim -g - - | wl-copy
bindsym $sft+Print exec grim -g "$(slurp)" - | wl-copy

## Screenshots — File
bindsym Ctrl+Print exec grim
bindsym Ctrl+$m+Print exec swaymsg -t get_tree | jq -r '.. | (.nodes? // empty)[] | if (.focused) then select(.focused) | "\(.rect.x),\(.rect.y) \(.rect.width)x\(.rect.height)" else (.floating_nodes? // empty)[] | select(.visible) | select(.focused) | "\(.rect.x),\(.rect.y) \(.rect.width)x\(.rect.height)" end' | grim -g -
bindsym Ctrl+$sft+Print exec grim -g "$(slurp)"


## Media — Volume
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

## Media — Playback
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous


## Brightness
bindsym XF86MonBrightnessUp exec brightnessctl -d intel_backlight -e set 5%+
bindsym XF86MonBrightnessDown exec brightnessctl -d intel_backlight -e set 5%-
bindsym XF86KbdBrightnessUp exec brightnessctl -d :white:kbd_backlight -e set 10%+
bindsym XF86KbdBrightnessDown exec brightnessctl -d :white:kbd_backlight -e set 10%-

bindsym $m+d exec sh $HOME/.config/sway/dimming.sh



# Initialization
exec sh $HOME/.config/sway/lock.sh

exec brightnessctl -d intel_backlight set 50%
exec brightnessctl -d :white:kbd_backlight set 0

exec swaymsg 'workspace 8'
exec sh $HOME/.config/sway/app-init.sh
